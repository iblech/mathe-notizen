=== Ein paar Eigenschaften

* Eig. koh. Moduln kann man super intern zeigen!
  vgl. http://amathew.files.wordpress.com/2010/07/031.pdf

* X reduziertes Schema <==>
    Sh(X) |== für alle s : O_X. [s nicht invertierbar ==> s = 0].

* X beliebiges Schema. Dann erfüllt O_X in Sh(X) folgende Eigenschaft:
    für alle s : O_X. [s nicht invertierbar ==> s nilpotent].

  Beispiel, wenn X zudem quasikompakt: Sei f globale Funktion.
  Dann: f verschwindet in allen k(x) <==> f nicht invertierbar in allen Halmen
  <==> Sh(X) |= f nicht invertierbar <==> Sh(X) |= f nilpotent <==> f^n = 0 für
  ein n (hier geht Quasikompaktheit ein).

* Topologischer Raum X zusammenhängend <==>
    Die interne Sprache von Sh(X) erfüllt folgende Eigenschaft:
    Seien phi, psi zwei disjunkte Aussagen (d.h. phi und psi ==> _|_).
    Dann folgt aus Sh(X) |== (phi oder psi), dass Sh(X) |== phi oder
    dass Sh(X) |== psi.

* Sei X topologischer Raum und phi eine Aussage der internen Sprache von Sh(X).
  Dann gilt: [[phi]] ist genau dann eine dichte Teilmenge von X, wenn
      Sh(X) |== nicht nicht phi.

* Sei X topologischer Raum. Dann ist genau dann jede nichtleere offene
  Teilmenge von X dicht, wenn für jede Aussage phi gilt:
      nicht (Sh(X) |== nicht phi)   ==>   Sh(X) |== nicht nicht phi.

* X reduziertes Schema, F Modul von endlichem Typ.
  Dann gilt: Sh(X) |== F ist nicht nicht frei (von endlichem Rang),
  also ist F lokal frei auf einer dichten Teilmenge!

* Die Bedigungen "F_x ist endlich erzeugt" und "F ist auf einer
  offenen Umgebung von x endlich erzeugt" haben wenig miteinander zu tun. Denn
  die Aussage, endlich erzeugt zu sein, ist (sogar, wenn man die Erzeuger
  vorgibt), keine geometrische Formel.


=== Unterschema

* Definiere für Punkte x0 \in X (X ein LRS) einen neuen Operator in der internen
  Sprache:

      U |== !x0  gdw.  x0 \not\in U.

  Diese Erweiterung erfüllt weiterhin das Lokalitätsaxiom. Sie ist auch einfach
  das Prädikat zum offenen Kern von (X \ {x0}).

  Bemerkung: Falls x0 abgeschlossen ist, gilt für Punkte x: Genau dann gibt es
  eine offene Umgebung U von x, sodass U |== !x0, falls x ungleich x0.
  Daher kann man "!x0" als geometrische Formel ansehen, deren Rückzug auf den
  Halm bei x "x != x0" bedeutet.

* Für eine Funktion f \in O_X(X) gilt:

      f = 0 \in k(x0)  <==>  X |== (f inv. ==> !x0).

  "==>": Sei U \subseteq X. Sei f auf U invertierbar. Dann ist f auch in allen
  k(x), x \in U, invertierbar. Also x0 \not\in U.

  "<==": Auf D(f) ist f invertierbar. Also muss x0 \not\in D(f) sein. Also ist
  f in O_{X,x0} nicht invertierbar, liegt somit im maximalen Ideal und ist im
  Körper k(x0) Null.

* Daraus folgere ich: Das Ideal vorne in der kurzen exakten Sequenz zum
  Unterschema Spec k(x0) (falls x0 abgeschlossen),

      0 --> I --> O_X --> i_* O_k(x0) --> 0,

  kann in der internen Sprache durch

      { f : O_X | f invertierbar ==> !x0 }

  gegeben werden.

* Was passiert bei anderen Aussagen phi statt "!x0"? Ideale erhält man in jedem
  Fall.

* Kann man dadurch auch größere Unterschemata charakterisieren?

* Kann man die Ideale der obigen Form irgendwie charakterisieren?

* J ist eine Art maximales Ideal -- aber leider nicht ganz:

  * X |== 1 \in J ist gleichbedeutend mit X |== !x0.
    Das ist genau dann richtig, wenn X = {x0}.
    Aber obacht: X |== nicht (1 \in J) gilt leider nicht.
    Das würde bedeuten, dass für alle offenen Teilmengen U gilt:
    Sollte x0 nicht in U liegen, dann ist U leer.

  * X |== forall f,g : O. fg \in J ==> f \in J oder g \in J
    gilt, denn für f, g : O(U) mit fg = 0 in k(x0) folgt
    f = 0 oder g = 0 in k(x0). (Falls x0 \not\in U, ist "= 0" in k(x0) eine
    triviale wahre Aussage.)

  * U |== nicht (f \in J) bedeutet für f \in O(U),
    dass f auf einer dichten offenen Teilmenge von U invertierbar ist und
    dass alle nichtleeren offenen Teilmengen von U x0 enthalten.

  * Daher gilt X |== forall f : O. f \not\in J ==> J + (f) = (1).
    Denn sei f \in O(U) beliebig mit U |== nicht (f in J).
    Ohne Einschränkung sei U nicht leer.
    Dann ist f auf einer offenen dichten Teilmenge V von U invertierbar. Diese
    muss x0 enthalten. Überdecke U durch V und (U \ {x0}); hierbei geht die
    Abgeschlossenheit von x0 ein. Auf V gilt intern, dass (f) das Einsideal
    ist. Auf (U \ {x0}) gilt intern, dass J das Einsideal ist (da dort !x0
    gilt).


=== Internes Spektrum

* O_X in Sh(X), also dem kleinen Zariski-Topos, hat im Allgemeinen noch viele
  maximale Ideale: die Idealgarben zu abgeschlossenen Punkten.

* Etwa im Fall X = Spec Z besitzt O_X aber keine interessanten Primelemente:
  Die Bedingung "p|xy ==> p|x oder p|y" ist eine geometrische Sequenz und gilt
  daher genau dann, wenn sie halmweise gilt. Am generischen Halm ist sie aber
  nur für p = 0 \in Q erfüllt. Also gilt auch p = 0 \in Z (bzw. Z[(...)^{-1}],
  wenn nicht mit einem globalen Element gestartet).


=== Endlichkeit

* Sei X = A^n über einem Ring R. Dann ist O_X als "Algebra, wo man auch
  Quotienten bilden darf" über R[X_1,...,X_n] (konstante Garbe) endlich
  erzeugt, d.h. es gilt

      Sh(X) |==
          forall f : O_X. exists g, h : R[X_1,...,X_n].
          h(x_1,...,x_n) invertierbar in O_X und
          f = g(x_1,...,x_n) / h(x_1,...,x_n).

  Somit gilt auch O_X = Quot R[X_1,...,X_n], wobei nach den Elementen
  lokalisiert wird, die in O_X invertierbar sind.

* Tieferer Hintergrund ist natürlich die Konstruktion von O_X als Lokalisierung
  nach dem universellen Filter.

* Sollte genauso für jede endlich erzeugte R-Algebra statt speziell R[X_1,...,X_n]
  funktionieren. Die x_i beziehen sich dann auf die gegebenen Erzeuger.
  (Nutze: f^(-1) A ist e.e. f^(-1)k-Algebra, falls A e.e. k-Algebra.)


=== Aussagen an Halmen

Sei box die Modalität ((__ --> !x) --> !x). Es gilt

    U |== box phi

genau dann, wenn x \not\in U oder wenn eine offene Teilmenge V von U mit x \in
V und V |== phi existiert.

* "Sei F v.e.T. um x und F_x = 0 (Halm). Dann F = 0 um x."

  Das folgt sofort aus:
  "box(F endl.erz.), forall s:F. box(s=0).  ==>  box(forall s:F. s=0)."

  Denn: "F_x = 0" ist äquivalent zu "(F = 0)^box" (wie negneg-Übersetzung). Das
  ist nach dem bekannten Vereinfachungslemma äquivalent zu "forall s:F.
  box(s=0)".

* "Sei F v.e.P. um x und F_x ~~ O_x^n. Dann F frei v.R. n um x."

  Das folgt sofort aus:

      box(F endlich präsentiert), (F frei v. R. n)^box
        ==> box(F frei v. R. n).

  Unter der Präsentationsvoraussetzung ist die Eigenschaft, frei vom Rang n zu
  sein, eine geometrische: Es soll Elemente aus HOM(O^n,F) und HOM(F,O^n)
  geben, die miteinander verknüpft beide Male die Identität geben. Daher
  ist (F frei v. R. n)^box äquivalent zu box(F frei v. R. n). Damit ist schon
  alles klar.


=== Garbifizierung

Sei j eine Lawvere-Tierney-Topologie.

* Ein Unterobjekt U --> X ist genau dann j-dicht, wenn

      forall x:X. j(x \in U).

* Ein Unterobjekt U --> X ist genau dann j-abgeschlossen, wenn

      forall x:X. j(x \in U) ==> x \in U.

* Ein Objekt X ist genau dann j-separiert, wenn

      forall x,y:X. j(x = y) ==> x = y.

* Ein Objekt X ist genau dann eine j-Garbe, wenn

      forall S \subseteq X:
          j(S Singleton) ==> exists! x:X. j(x \in S).

  Bemerkung: Falls X j-separiert ist, sind äquivalent:
  * j(S Singleton).
  * S Subsingleton und j(S bewohnt).

  In diesem Fall sind ferner äquivalent:
  * j(x \in S).
  * j(S = {x}).

* Die Plus-Konstruktion kann man so definieren:

      X^+ := { S \subseteq X | j(S Singleton) }/~,

  wobei S ~ T :<==> j(S = T).

  Man kann auch gleich nur j-stabile Repräsentanten nehmen.

* Dann gelten die üblichen Resultate zur Plus-Konstruktion.

* Insbesondere gilt, wenn X schon j-separiert war, dass

      X^+ = { S \subseteq X | S Subsingleton, j(S bewohnt) }/~

  die j-Garbifizierung von X ist.

* J = { phi | j(phi) } klassifiziert j-dichte Unterobjekte,
  Omega_j = { phi | j(phi) <==> phi } klassifiziert j-abgeschlossene
  Unterobjekte.

* In einem Garbentopos Sh(X) gilt:

  * Ein Unterobjekt A --> B ist genau dann negneg-dicht,
    wenn jeder Schnitt von B zumindest auf einer offenen dichten Teilmenge ein
    Urbild unter der Inklusion besitzt.

  * Eine Garbe ist genau dann negneg-separiert, wenn
    Schnitte, die auf einer offenen dichten Teilmenge übereinstimmen,
    sondern ganz übereinstimmen.

  * Eine Garbe ist genau dann eine negneg-Garbe, wenn
    jeder Schnitt, der auf einer offenen dichten Teilmenge definiert ist,
    genau eine Fortsetzung besitzt.

* Literatur:

  Vladimir Lifschitz.
  An intuitionistic definition of classical natural numbers.
  Er arbeitet mit der negneg-Garbifizierung der natürlichen Zahlen.

  Fer-Jan de Vries.
  Applications of constructive logic to sheaf constructions in toposes.
  Vorsicht: Dort wurde "j-dicht" mit "j-abgeschlossen" verwechselt!

  Peter Johnstone.
  The associated sheaf functor in an elementary topos.

  M.F. Farina & G.C. Meloni, The associated sheaf functor, Istit. Lombardo
  Accad. Sci. Lett. Rend. A 114 (1982), 50--55.
  unzugänglich!


=== Lokale Kripke-Joyal-Semantik

* Kann definieren: U |==_negneg phi genau dann,
  wenn auf einer offenen dichten Teilmenge V von U gilt: V |== phi.
  (Das ist zu j = negneg.)

  Analog: U |==_x phi genau dann,
  wenn x kein Element von U ist oder eine Teilmenge V von U
  mit x in V und V |== phi existiert.
  (Das ist zu j = ((__ --> !x) --> !x).)

* Somit U |==_j phi genau dann, wenn U |== phi^j (Übersetzung, bei der
  eigentlich vor alles, eigentlich aber nur vor atomare Aussagen, vee
  und exists ein j kommt).

* Die so definierte interne Sprache ist klassisch (erfüllt LEM).


=== Rationale Funktionen I

* Intern kann man die Teilmenge

      S := { f : O_X | f regulär }

  definieren. Diese ist multiplikativ abgeschlossen. Da "f regulär" für festes
  f \in O_X(U) eine geometrische Implikation ist, gilt:

      S(U) = { f \in O_X(U) | f regulär in allen O_{X,x}, x \in U }.

  Dabei verwendet: [[ { x : F | phi(x) } ]](U) = { x \in F(U) | U |== phi(x) },
  siehe kategorielle-logik.txt.

  Obacht: Da die Konstruktion von S nicht an sich geometrisch ist, stimmt der
  Halm S_x NICHT mit der Menge der regulären Elemente in O_{X,x} überein.

* Daher kann man intern S^(-1) O_X bilden.

* Die extern definierte Ringgarbe K rationaler Funktionen erfüllt dieselbe
  universelle Eigenschaft:

      Sei U \subseteq X. Sei F Ringgarbe auf U. Sei phi : O_X --> F
      Ringhomo, der aus interner Sicht reguläre Elemente auf invertierbare
      schickt; das ist extern äquivalent dazu, dass er auf allen offenen Teilmengen V
      die Elemente aus S(V) auf invertierbare Elemente schickt.

      Dann gibt es genau einen Morphismus K^pre|_U --> F, der das Dreieck
      O_U --> K^pre --> F zum Kommutieren bringt. Wegen der Lokalität der
      Vergarbung gibt es daher genau einen Morphismus K|_U = a(K^pre|_U), der
      das Dreieck K^pre|_U --> K|_U --> F zum Kommutieren bringt.
 
  Dabei verwendet: Stack-Semantik, um die universelle Eigenschaft richtig zu
  interpretieren; Lokalität der Vergarbung; Beschreibung von K aus
  http://therisingsea.org/notes/Section2.6-Divisors.pdf.
  Siehe auch http://therisingsea.org/notes/Section2.8-Differentials.pdf.

* Also kann ich K intern verstehen als S^(-1) O_X! :-)

* Da Lokalisierung eine geometrische Konstruktion ist, gilt
  (S^(-1) O_X)_x = S_x^(-1) O_{X,x}. Der Halm S_x bettet zwar immer
  injektiv ein, kann aber echt kleiner sein als die Menge der regulären
  Elemente in O_{X,x}. Daher ist der Halm im Allgemeinen NICHT gleich dem
  totalten Quotientenring von O_{X,x}.

  Kleiman schreibt, dass wenn X lokal noethersch oder wenn X reduziert ist und
  die Menge der irreduziblen Komponenten lokal endlich ist, es doch stimmt.

* Wenn O_X reduziert ist, ist S^(-1) O_X ein Körper von Brüchen, d.h. erfüllt
  "ungleich Null ==> invertierbar": Sei f/s nicht Null. Dann ist auch f nicht
  Null. Dann ist f auch in O_X nicht Null. Also ist f in O_X regulär. Also ist f
  und somit f/s in S^(-1) O_X invertierbar.

  Ein lokaler Ring ist S^(-1) O_X im Allgemeinen aber nicht. Dazu müsste S
  einen Filter bilden, d.h. es müsste gelten:

      x + y regulär  ==>  x regulär  oder  y regulär.


=== Rationale Funktionen II

* Sei zu einer Menge F folgende Menge P, ausgeschrieben
  P_{<= 1}^{\neg\neg bewohnt}(F), definiert:

      P = { W \subseteq F | W Subsingleton und nicht nicht bewohnt }.

  * Falls F etwa ein Ring ist, erbt P auch die Ring-Operationen:

      W + W' := { w + w' | w \in W, w' \in W' }
          -W := { -w | w \in W }
           0 := { 0 }

    Allerdings gelten nicht alle Axiome. Etwa ist W + (-W) nicht unbedingt
    gleich { 0 }, sondern nur nicht nicht gleich { 0 }.

  * Falls x in W, so W = { x }.

  * Man kann auch P/negneg betrachten. Das ist dann wirklich ein Ring.

* Falls Gleichheit in F nichtnicht-stabil ist, lässt sich die Bedingung an W
  äquivalent wie folgt schreiben:

      Nicht nicht ist W ein Singleton.

  Extern bedeutet die Nichtnichtstabilität, dass für jede offene Menge U
  und für je zwei Schnitte s, s' von F auf U gilt: Sollten s und s' auf einer
  dichten offenen Teilmenge von U übereinstimmen, so stimmen sie schon auf ganz U
  überein.

* Falls R ein Ring mit s regulär <==> --(s invertierbar) ist
  (das gilt zum Beispiel für O_X, falls X reduziert ist), so
  gibt es einen injektiven Ringhomo Reg^(-1) R --> P(R)/negneg.

  Schicke einen Bruch f/s auf die Klasse von W := { uf | u : R, us = 1 }.
  W ist sicherlich ein Subsingleton und nach Voraussetzung an R auch
  nicht nicht bewohnt.

  Surjektiv ist dieser Homo aber nicht immer -- wohl aber im Anwendungsfall in
  der algebraischen Geometrie, siehe unten.

* Für die volle Potenzmengengarbe PP von F gilt:

      Gamma(U, PP) = Hom(U_, [F, Omega]) = Hom(U_ x F, Omega)
          = Sub(U_ x F) = Sub(F|_U), denn:

  * Gamma(V, U_ x F) = { s \in F(V) | V \subseteq U }.
    Insbesondere also (U_ x F)|_U = F.
    (Es gilt NICHT: U_ x F = i_* i^(-1) F = i_* F|_U. Das kann nämlich noch
    viele globale Schnitte haben.)

  * Ist G ^--> U_ x F ein Unterobjekt, so ist
    G|_U --> F|_U das zugehörige Unterobjekt von F|_U.

  * Ist H ^--> F|_U ein Unterobjekt, so ist
    (V |-> { s \in H(U \cap V) | V \subseteq U }) das zugehörige Unterobjekt
    von U_ x F.

* Für die Garbe PPP der Subsingletons gilt:

      Gamma(U, PPP)
          = { S \in Gamma(U, PP) | U |== forall x,y \in S. x = y }
          = { [S ^--> F|_U]      | U |== forall x,y : S.   x = y }
          = { [S ^--> F|_U]      | alle Halme S_x sind Subsingletons }
  
  Beim zweiten Schritt muss man kurz nachdenken, da die Beschreibung der vollen
  Potenzmengengarbe ausgenutzt wird.

* Für die Garbe P gilt:

      Gamma(U, P)
          = { [S ^--> F|_U] | U |== S Subsingleton und nicht nicht bewohnt }
          = { [S ^--> F|_U] | alle Halme S_x Subsingletons und
                                  es existiert eine offene dichte Teilmenge V in U
                                  sodass alle Halme auf V Singletons sind }.
  
  Das kann man weiter vereinfachen zu

          = { <V in U offen dicht, s \in F(V)> }.

  Die Zuordnung geht so: Zu einem Unterobjekt S kann man die Menge
  V := { x \in U | S_x bewohnt } = Vereinigung über all die offenen Mengen W,
  für die S(W) bewohnt ist, bilden. Auf dieser gibt es einen Schnitt s als
  Verklebung der gegebenen Keime.

  Umgekehrt kann man zu <V,s> ein Unterobjekt S durch

        S(W) = { s|_{W cap Z} \in F(W cap Z) | Z \subseteq W }

  definieren.

* Als nächstes kann man P(F)/negneg betrachten. 

* Beispiel: F = C, F = C^\infty und F = O_X auf reduzierten Schemata X
  sind negneg-separiert. Daher sind Schnitte von P(F)/negneg durch das gegeben, was
  man gemeinhin rationale Funktionen nennt.


=== Cartier-Divisoren und Geradenbündel

* Ein rationaler Schnitt eines Geradenbündels L ist wohl dasselbe wie
  ein globaler Schnitt von L tensor_O K.

* So einem Schnitt kann man ein eindeutiges Element aus K_X/O_X^* zuordnen
  (f ~ g <==> f = u g für ein u aus O_X^*), und zwar wie folgt:

  Sei q aus L[S^(-1)] vorgegeben.
  Dann gibt es x, s mit q = x/s.
  Ferner gibt es phi : L --> O_X Iso.
  Setze f := phi(x) / s in K_X.
  Dann ist [f] die gesuchte Klasse.

  Man kann nachrechnen, dass diese Klasse nicht von den Wahlen (x, s, phi)
  abhängt. Daher definiert das wirklich ein globales Element von K_X^*/O_X^*.
  Formal zeigt man also:

      exists! a : K_X/O_X^*:
          exists f : K_X. exists x : L. exists s : S. exists phi : L --> O_X.
              a = [f] und q = x/s und f = phi(x)/s.

* Zu einem nichtverschwindenden Element D aus K_X^*/O_X^* kann ich ein
  Geradenbündel O_X(D) zuordnen:

  Schreibe D = [f]. Dann O_X(D) := 1/f * O_X \subseteq K_X.

  Wie oben ist das Unabhängigkeit von der Wahl von f. Mit "nicht verschwindend"
  muss gemeint sein, dass f in K_X invertierbar ist. Das ist genau dann der
  Fall, wenn der Zähler regulär ist.

* Sei dann s ein nichtverschwindender rationaler Schnitt eines Geradenbündels L.
  Dann kann man in der internen Sprache explizit einen Iso

      L --> O(div s)

  hinschreiben: Sei z aus L beliebig. Sei s = x/s. Sei phi : L --> O_X.
  Dann div(s) = [phi(x)/s]. Also O(div(s)) = s/phi(x) * O_X. Ordne daher z auf
  s/phi(x) * phi(z) ab.

* Dann kann man in der internen Sprache beweisen:
  Genau dann hat man einen globalen Iso O(D) --> O(D'),
  wenn man einen globalen Schnitt f von K_X^* mit D - D' = [f] hat.

  Explizit: Sei phi : O(D) --> O(D') ein Iso. Schreibe D = [g], D' = [g'].
  Dann gibt es ein p : O_X mit phi(1/g) = 1/g' * p.
  Setze dann f := phi(1/g) / (1/g) = g/g' * p : K_X.
  Dann kann man nachrechnen, dass f in K_X invertierbar ist (also p regulär in
  O_X ist), dass g/g' = u f für ein invertierbares u : O_X (also p invertierbar
  in O_X) und dass f unabhängig von der Wahl von g ist.

  Umgekehrt: Sei f ein globaler Schnitt von K_X^* mit D - D' = [f].
  Schreibe D = [g] und D' = [g']. Dann g/g' = u f für ein invertierbares u : O_X.
  Dann ist O(D) --> O(D'), h |--> h * f ein Iso. Die Wohldefiniertheit kann man
  natürlich intern zeigen: Ein h = p/g wird auf pf/g = u^(-1) p/g' abgebildet.

* Ebenso einfach: Jeder O_X-Untermodul F von K_X, der lokal vom Rang 1 ist, ist
  von der Form O(D) für einen Cartier-Divisor D.

  Intern habe einen Iso phi : F --> O_X.
  Es ist phi^(-1)(1) \in F \subseteq K_X.
  Kann also D := [ 1 / phi^(-1)(1) ] definieren.

  Dann kann man zeigen: D ist wohldefiniert (d.h. phi^(-1)(1) ist tatsächlich
  in K_X invertierbar) und unabhängig von der Wahl von phi.
  Nutze für letzteres die Identität psi(phi^(-1)(h)) = h * psi(phi^(-1)(1)),
  wobei der zweite Faktor ein invertierbares Element aus O_X ist.


=== Kählerdifferentiale

* Die Konstruktion, Kählerdifferentiale zu bilden, ist geometrisch (siehe
  kategorielle-logik.txt). Daher ist völlig klar: Der Halm von Omega_{B/A}
  ist Omega_{B_x/A_x}.


=== Antiklassische Prinzipien im kleinen Zariski-Topos

Grothendiecks "generic freeness lemma" sagt:

    Let A be a Noetherian integral domain, M a finitely generated A-module. Then
    there there exists f \in A, f \neq 0, with M[f^(-1)] a free A[f^(-1)]-module.

Daraus folgt folgendes Prinzip für die interne Welt des kleinen Zariski-Topos
von A:

    Ein endlich erzeugter O_X-Modul ist bereits nicht nicht frei.

Das ist leider, anders als der Titel versprechen lässt, KEIN antiklassisches
Prinzip: Denn O_X ist ja aus interner Sicht eine Art Körper. Für Körper ist
diese Aussage aber (klassisch) zu erwarten.


=== Induktionsbeweise für Vektorbündel

Beweise Lemma 3 von
http://mathriding.wordpress.com/2012/12/06/vector-bundles-locally-free-sheaves-and-divisors-on-a-curve/:

Sei E ein Vektorbündel vom Rang r. Dann gibt es eine kurze exakte Sequenz

    0 --> L --> E --> E' --> 0,

wobei L ein Geradenbündel und E' ein Vektorbündel vom Rang r-1 ist.


=== Untertopoi

Ist U eine offene Teilmenge von X, kann man das Prädikat ?U mit

    V |== ?U  gdw.  V \subseteq U

betrachten. Ist A eine abgeschlossene Teilmenge von X, so gilt

    V |== ?A^c  gdw.  V \subseteq A^c  gdw.  V \cap A = leer.

* V |== (?U ==> phi) gdw. (V cap U) |== phi.

* Was bedeutet V |== (?A^c vee phi)? Etwa (V \cap A) |==_A phi?
  Ist Zurückziehen auf abgeschlossene Teilmengen ein logischer Funktor?


=== Generische Elemente I

Ziel: Verstehen, wie man "Sei N eine unbeschränkte natürliche Zahl." rigoros
machen kann.

Eine Möglichkeit: Arbeite im Topos E := [N, Set], wobei N mit der gewöhnlichen
Ordnung versehen wird.

* Es gilt p |== neg neg phi (wobei n eine Abkürzung für Hom_{N^op}(__, n) ist)
  genau dann, wenn nicht nicht ein q >= p existiert mit q |== phi.

* In E habe ein Objekt natürlicher Zahl: NN, die konstante Koprägarbe N.

* Führe eine neue Termkonstante # vom Typ NN ein. Deren Interpretation im
  Kontext p soll Hom(__, p) --> NN, gegeben durch das Element p \in NN(p),
  sein. (Unter Rückzügen bleibt # #!)

* Dann gilt:

      p |== forall n : NN. neg neg (# >= n),

  denn das ist gleichbedeutend mit

      fa. q >= p, n in N:
          neg neg exists r >= q:
              r |== # >= n

  und ist also für r := max { q, n } wahr.

* Aber: Diese Formalisierung ist nicht verträglich mit klassischer Logik.
  Wenn man die möchte, sollte man vielleicht nicht auf Teufel komm Raus
  unbedingt die nichtnicht-Modalität verwenden, sondern eine andere (neue)!

  Ein Axiom der Form "top |-_{n:N} box (# >= n)" ist aber schlecht.
  Denn dann wäre auch "box (# >= # + 1)" und somit "box bot" ableitbar.
  Das soll vermutlich nicht sein.

* Wie kann man das umsetzen? Was wären Modelle dafür?

* Wie auf andere Arten von generischen Objekten ausweiten?


=== Generische Elemente II

Betrachte den Topos E = Sh(R). Darin gibt es die universelle reelle Zahl #,
gegeben durch die Identitätsfunktion als globalen Schnitt von C.

* Falsch ist: E |== # != #.

* Es gilt: E |== forall q : Q. # != q.

* Falsch ist: E |== forall r : R. # != r.

* Es gilt: E |== neg \vee_n exists a_0,...,a_(n-1) : Q. #^n + sum_i a_i #^i = 0.

  Denn normierte Polynome vom Grad n können nicht auf nichtleeren offenen
  Teilmengen verschwinden.

* Es gilt: E |== negneg exists q:Q. |#| >= q > 0,
  d.h. E |== negneg (# apart 0).

* In E' := Sh_negneg(R) gilt also: 

      E' |== # apart 0.

  In E' kann man also klassisch arbeiten und hat eine reelle Zahl #
  zur Verfügung, die apart von jeder rationalen Zahl ist.

* Frage: Welche Interpretation haben Ergebnisse, die man in E' erzielt?
  Das betrifft insbesondere solche, in deren Formulierung # nicht vorkommt.


=== Generische Elemente III

* Idee: Arbeite mit kleinster dichten Unterörtlichkeit und verwende geeignete
  Sprache, um sinnvoll vorgeben zu können, dass diese Punkte enthält.

  Damit soll folgendes funktionieren: Wenn man argumentieren kann
  "Sei x in D. Dann x in U_1, U_2, U_3. Wegen U_1 cap U_2 cap U_3 subseteq V
  folgt also x in V.", dann soll folgen, dass V eine dichte Teilmenge ist.

* Vielleicht sollte man in Sh(Loc) arbeiten, um vorgeben zu können,
  dass Örtlichkeiten Punkte haben. Vergleiche Johnstones Artikel über den
  topologischen Topos und Diagrammjagden in allgemeinen abelschen Kategorien.

* Verstehe Zusammenhang zu Terence Taos Mini-NSA: Offensichtlich haben
  "auf offener dichter Teilmenge" und "nach Übergang zu einer Teilfolge"
  ähnlichen Charakter.

  Siehe: http://math.stackexchange.com/questions/454393/does-cheap-nonstandard-analysis-take-place-in-a-topos/


=== Nächste Schritte

* "Lemma 3" oben beweisen

* Welches Transferprinzip gilt zwischen Aussagen für
  A-Moduln M und A~-Moduln M~ auf Spec A?

* Wie Marcs topos-theoretische Sicht auf Arbeit mit generischen Situationen
  formalisieren?

* Hatte interne Garben bzg. Lawvere-Tierney-Topologien mal verstanden.
  Wieder verstehen und aufschreiben!

* Ist eine Garbe genau dann lokal konstant, wenn sie aus interner Sicht diskret
  ist? Vermutlich nicht! Gegenbeispiel? Wie kann man denn konstante oder lokal
  konstante Garben intern erkennen? Vielleicht irgendwie, dass sie unter jedem
  phi gleich aussehen?

* Was hat Marc zu internen Dedekindringen gesagt?
  Sei X = Spec(Zahlkörper). Dann Sh(X) |= "O_X ist ein Hauptidealbereich". ?

* Schema X genau dann lokal von endlicher Präsentation,
  wenn Hom(__, X) (bestimmte) Limiten bewahrt!
  Siehe: http://stacks.math.columbia.edu/download/limits.pdf

* Erhalte ich X_red, indem ich O_X/sqrt(0) intern betrachte?

* Richmans "enabling conditions" topostheoretisch verstehen!

* Klassifikation der Vektorbündel auf P^1 und A^1 intern möglich?
  (Siehe Vakil 18.5.6.) Könnte etwas mit der Smithschen Normalform zu tun
  haben.

* Endlich relatives Spektrum als internes Spektrum verstehen.
  Spec(O_X) ist vielleicht nicht unbedingt der Punkt (sollte er aber sein!),
  aber zumindest ein lokaler Raum.

* Sei E --> X ein topologisches Vektorbündel.
  Dann kann man seine Projektivierung konstruieren: P(E) --> X.
  Kann man das intern verstehen?

* Unter gewissen Umständen gilt bei eigentlichen Abbildungen f, dass
  f_* O_X ~~ O_Y. Siehe
  http://mathoverflow.net/questions/63301/when-will-the-pushforward-of-a-structure-sheaf-still-be-a-structure-sheaf.
  Kann man das verwenden, um intern Eigentlichkeit zu charakterisieren?

* Kripke-Joyal-Semantik auf (E,j) durch Kripke-Joyal-Semantik auf E
  ausdrücken! Siehe auch:
  http://math.stackexchange.com/questions/177484/what-is-a-lawvere-tierney-topology
  Würde die Anwendbarkeit interner Methoden deutlich vergrößern, da man über
  offene und abgeschlossene Unterschemata reden könnte.

* Garbenbedingung und Garbifizierung zu Lawvere-Tierney-Topologien intern
  verstehen. Vgl. Johnstone: The associated sheaf functor in an elementary
  topos.

* X qc, O_{X,x} reduziert für alle abgeschlossenen Punkte x ==> O_X reduziert.
  Wie intern zeigen?

* Was ist ein Geradenbündel "mit einer Trivialisierung beim generischen Punkt",
  und wie schlägt sich das intern nieder?

* Zar(A) --> Sh(Spec A) ist lokal, laut dem nLab! Konsequenzen?

* "G --> F, G veT, F koh., phi_x inj ==> phi|_U inj"


=== math.se-Antwort

http://math.stackexchange.com/questions/394194/what-does-a-proof-in-an-internal-logic-actually-look-like/394981#394981

Here is an arbitrary example from algebraic geometry. We'll prove the following
well-known statement about $\mathcal{O}_X$-modules on reduced schemes $X$ by
reducing to constructive linear algebra interpreted in the topos
$\mathrm{Sh}(X)$ of sheaves on $X$:

> Let $\mathcal{F}$ be an $\mathcal{O}_X$-module locally of finite type.
> Then $\mathcal{F}$ is locally free iff its rank is constant.

We can translate this statement into the internal language of $\mathrm{Sh}(X)$
by the following dictionary:

 - In the internal language, the sheaf of rings $\mathcal{O}_X$ looks like an ordinary ring.
 - Accordingly, $\mathcal{F}$ looks like an ordinary module on that ring.
 - $\mathcal{F}$ is locally of finite type iff it is finitely generated from
   the internal point of view.
 - $\mathcal{F}$ is locally free iff it is a free module from the internal
   point of view.
 - Internally, we can define the rank of $\mathcal{F}$ as the minimal number
   of elements needed to generate $\mathcal{F}$. But constructively,
   the natural numbers may fail to have minima of arbitrary inhabited sets (see
   [this enlightening blog post by Andrej Bauer][1]), so this minimal number
   might not actually be an (internal) natural number, but be an element of a
   suitable completion. Externally, the rank defined this way induces a upper
   semicontinuous function on $X$ (see [nLab and the Mulvey reference therein][2]); it is constant iff internally, the minimal number of
   generators is an actual natural number.
 - Finally, the scheme $X$ is reduced iff $\mathcal{O}_X$ looks like an
   ordinary reduced ring from the internal perspective. This in turn is
   equivalent to $\mathcal{O}_X$ being a so-called residue field from the
   internal point of view (i.e. a non-trivial ring with every non-unit being
   zero).

So the statement follows if we can give a constructive proof of the following
linear algebra fact:

> Let $A$ be a residue field and let $M$ be a finitely generated $A$-module.
> Then $A$ is free iff the minimal number of elements needed to generate $M$
> as an $A$-module is an actual natural number.

The direction "$\Rightarrow$" is clear. For the direction "$\Leftarrow$",
consider a minimal generating family $x_1,\ldots,x_n$ of $M$ (which exists by
assumption). This family is linearly independent (and therefore a basis): Let $\sum_i \lambda_i x_i =
0$. If any $\lambda_i$ were invertible, the family
$x_1,\ldots,x_{i-1},x_{i+1},\ldots,x_n$ would too generate $M$, contradicting
the minimality. So each $\lambda_i$ is not invertible and thus zero (by assumption on $A$).

  [1]: http://math.andrej.com/2009/09/08/constructive-stone-minima-of-sets-of-natural-numbers/
  [2]: http://ncatlab.org/nlab/show/one-sided+real+number


=== Zweite math.se-Antwort

A topological space (or locale) $X$ is *local* (i.e. in any covering of $X$ by
open subsets at least one such subset is already equal to $X$) iff the internal
language of $\mathrm{Sh}(X)$ fulfils the following disjunction property: If
$(\phi_i)_{i \in I}$ is an arbitrary family of formulas and $\mathrm{Sh}(X)
\models \bigvee_{i \in I} \phi_i$, then there exists an index $i \in I$ such
that $\mathrm{Sh}(X) \models \phi_i$.

Also, if $X$ is local, the internal language fulfils the following existence
property: If $\mathrm{Sh}(X) \models \exists x : \mathcal{F}. \phi(x)$, then
there actually exists a global section $x \in \Gamma(X,\mathcal{F})$ such that
$\mathrm{Sh}(X) \models \phi(x)$.

A topological space $X$ is *compact* iff the internal language of
$\mathrm{Sh}(X)$ fulfils the following property: If $I$ is a directed set,
$(\phi_i)_{i \in I}$ is a monotone family of formulas (meaning $\mathrm{Sh}(X)
\models (\phi_i \Rightarrow \phi_j)$ for $i \preceq j$) and $\mathrm{Sh}(X)
\models \bigvee_{i \in I} \phi_i$, then there exists an index $i \in I$ such
that $\mathrm{Sh}(X) \models \phi_i$. This follows directly from the
order-theoretic characterization of compactness (a space $X$ being compact iff
for any monotone family $(U_i)_{i \in I}$ of open sets with $X = \bigcup_i
U_i$, there exists $i \in I$ such that $X = U_i$).

As an example, you can use the latter characterization to give an internal
proof of [lemma 01BB in the Stacks Project][1] (saying that if a filtered
colimit $\mathcal{F} = \mathrm{colim}_i \mathcal{F}_i$ of
$\mathcal{O}_X$-modules is of finite type on a quasi-compact scheme $X$, then
one of the maps $\mathcal{F}_i \to \mathcal{F}$ is an epimorphism) by reducing
to the following familiar fact of constructive linear algebra: If a filtered
colimit $A = \mathrm{colim}_i A_i$ is finitely generated, one of the maps $A_i
\to A$ is surjective.

Unfortunately, the logical principles above are *meta* properties of the
internal language, so I'm not sure this answers your question.

**Addendum:** An intrinsic characterization of compactness is not possible,
i.e. there cannot exist a formula $\phi$ such that the internal language of the
sheaf topos of a topological space satisfies $\phi$ iff the space is compact:
If a topological space $X$ can be covered by compact subspaces $U_i$, the
formula $\phi$ would be satisfied on each $U_i$ and hence, by the local
character of the internal language, on $X$ as well. If $X$ itself is not
compact, this is a contradiction.

  [1]: http://stacks.math.columbia.edu/tag/01BB


=== Graphen

Siehe Andrej Bauers MO-Post und Sebastiano Vigna, A guided tour in the topos
of graphs.


=== Lefschetz-Prinzip

Siehe Lefschetz's principle, J Barwise, P Eklof.
http://www.sciencedirect.com/science/article/pii/0021869369901173

Lefschetz's principle and local functors.
http://www.ams.org/journals/proc/1973-037-02/S0002-9939-1973-0325389-7/S0002-9939-1973-0325389-7.pdf
