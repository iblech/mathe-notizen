=== Internes Spektrum

* W. D. Gillam. Localization of ringed spaces.
  http://www.math.brown.edu/~wgillam/localizationfinal.pdf

* Myles Tierney. In Algebra, topology and category theory (Ed. Alex Heller): On
  the spectrum of a ringed topos.

* Coquand & Co. Spectral schemes as ringed lattices.
  http://hlombardi.free.fr/publis/schemas.pdf

* Mit Primidealen geht es natürlich nicht, und genauso nicht mit Filtern.
  Wurde mal von Lawvere behauptet, zum Beispiel in
  http://www.mathunion.org/ICM/ICM1970.1/Main/icm1970.1.0329.0334.ocr.pdf,
  später aber durch Joyal widerlegt.


=== Coquands Spektrum

Sei A ein Ring.

Definiere L_A := Rad_fin(A), ist ein distributiver Verband (kein Rahmen).
Hat die Basis L_A' := { sqrt(f) | f \in A }.

Habe die auf L_A' definierte Garbe

    J |--> A[S_J^(-1)], wobei S_J = { c \in A | J \subseteq sqrt(c) }.
    (Bemerkung: Falls J = sqrt(f), ist Invertierung an S_J dasselbe wie
    Invertierung von f.)

Kann diese Garbe auf ganz L_A fortsetzen. Auf diese Weise wird L_A zu einem
geringten distributiven Verband.

Über Lokalitätsbegriffe spricht Coquand erstmal nicht.


=== Rahmen der Radikalideale

* Rad(A), die Menge aller Radikalideale, ist ein Rahmen.

* Elemente der Form sqrt((x_1,...,x_n)) sind kompakt.

* sqrt(a cap b) = sqrt(a) cap sqrt(b) = sqrt(a * b).

* (a --> b) = (b : a) = { x | xa <= b }.
  (Für beliebige Ideale, nicht unbedingt Radikalideale, gilt:
  c <= (sqrt(a) : b)  <==>  c cap b <= sqrt(a).

* Für ein Radikalideal a ist die Menge

      Ja := { x | a \subseteq sqrt(x) }

  eine saturierte multiplikativ abgeschlossene Teilmenge. Für a = sqrt(f)
  ist Lokalisierung von Ja dasselbe wie Invertierung von f.

  Auf Rad(A) kann man kanonisch die Prägarbe

      O(a) := A[(Ja)^(-1)]

  definieren. Für endliche Überdeckungen erfüllt die vermutlich das
  Verklebeaxiom, für unendliche aber vermutlich nicht.

  Auf jeden Fall kann man intern in Sh(Rad(A)) einfach die konstante Garbe A
  an J lokalisieren. Das gibt die Strukturgarbe.

* Kurze Memo: Ein Radikalideal ist *nicht* genau dann endlich erzeugt,
  wenn es von der Form sqrt((x_1,...,x_n)) ist. Ein Beispiel ist das
  Radikalideal sqrt((0)) im Ring Z[X_1,...]/(X_1^1,X_2^2,...). Das ist ziemlich
  sicher gleich (X_1,...) und nicht endlich erzeugt.

* Es gibt auch den distributiven Verband der Radikalideale der Form
  sqrt((x_1,...,x_n)). Dessen Vervollständigung zu einem Rahmen ist Rad(A).

  Ist phi : Rad(A)_fg --> L ein Morphismus in einen Rahmen L, so können wir
  eine Fortsetzung phi' : Rad(A) --> L durch

      phi'(a) := bigvee_{b <= a, b in Rad(A)_fg} phi(b)

  definieren. Um Verträglichkeit von phi' mit bigvee einzusehen, beobachte,
  dass für b in Rad(A)_fg mit b <= bigvee a_i gilt: Es gibt endlich viele u_j
  mit u_j in a_j und b = bigvee_j (b wedge sqrt((u_j))), also phi(b) =
  bigvee_j phi(b wedge sqrt((u_j))); dann fertig mit der Beobachtung, dass
  b wedge sqrt((u_j)) endlich erzeugt und Teilmenge von a_j ist.

* Die örtlichkeitstheoretischen Punkte von Rad(A) stehen in
  Eins-zu-Eins-Korrespondenz zu den Filtern in A. Das hat einen tieferen Grund,
  denn Rad(A) ist die Örtlichkeit zur geometrischen Theorie eines Filters in A;
  Punkte sind daher Modelle in Set, d.h. tatsächliche Filter in A.

  Explizit sieht die Korrespondenz wie folgt aus:

  Sei F ein Filter in A. Dann ist M := { I | I cap F bewohnt } ein vollständig
  primer Filter in Rad(A), d.h. ein Punkt von Rad(A).

  Sei umgekehrt M ein vollständig primer Filter in Rad(A). Dann ist
  F := { x | sqrt(x) in M } ein Filter in A.

  In Primidealsprache gibt es also folgende Korrespondenz:

                Primideale von A  ~~~  Punkte von Rad(A)
                               p  |->  { I | I cap p^c bewohnt }
        { x | sqrt(x) \not\in M } <-|  M


=== Verklebeaxiom in einem Beispiel

Sei A ein Ring. Sei 1 = sum_i z_i x_i eine Zerlegung der Eins. Seien Brüche

    s_i = a_i/b_i in A[S_i^(-1)]

gegeben, wobei S_i = { c | x_i in sqrt(c) }. Also gibt es (oBdA eine)
natürliche Zahl n und Ringelemente u_i mit

    x_i^n = u_i b_i.

Gelte s_i = s_j in den zweifach lokalisierten Ringen. Das bedeutet (oBdA), dass
es eine natürliche Zahl m und Ringelemente c_ij, v_ij mit

    c_ij b_i a_j = c_ij b_j a_i,
    (x_i x_j)^m = v_ij c_ij

gibt. Setze dann s := sum_i #_i x_i^m a_i u_i, wobei die #_i so gewählt sind,
dass 1 = sum_i #_i x_i^(m+n) gilt. Dann gilt s/1 = a_j/b_j in A[S_j^(-1)], denn

    x_j^m b_j s = ... = x_j^m a_j.


=== Duale Algebra der Radikalideale ist kein Rahmen

Beispiel in Z: Das Radikalideal

    Schnitt über alle sqrt(p), p >= 3
    addiert zu (2)

ist gleich (2) und daher echt kleiner als

    Schnitt über alle (sqrt(p) addiert mit (2)), p >= 3,

was nämlich gleich (1) ist.


=== Spektrum als Lokalisierung an universellem Filter
(sollte lieber "generisch" statt "universell" sagen!)

Def.: Ein Filter F eines Rings A ist eine Teilmenge mit
1) 1 in F
2) xy in F  <==>  x, y in F
3) nicht: 0 in F
4) x + y in F  ==>  x in F oder y in F

Prop.: A ist ein lokaler Ring <==> A^x ist ein Filter.

Prop.: Sei S saturierte mult. abg. Teilmenge. Dann:
    S Filter <==> A[S^(-1)] lokal.

Beob.: In X = Spec A habe gamma^*(A). Das ist ein Ring, jedoch nicht unbedingt
ein lokaler. Ferner habe den universellen Filter F auf gamma^*(A), auf offenen
Teilmengen definiert durch

    F(U) = { f : U --> A stetig | f(p) \not\in p f.a. p \in U }.

Die Lokalisierung von gamma^*(A) nach diesem Filter liefert gerade O_X.

Es gibt auch das universelle Primideal Z, mit

    Z(U) = { f : U --> A stetig | f(p) \in p f.a. p \in U }.

Es gilt in der internen Sprache:

    forall f : gamma^*(A). nicht (f in F) <==> f in Z.

* D(f) |== g in F  <==>  f in sqrt((g))
* D(f) |== g in P  <==>  fg nilpotent

* Ferner: Ist M ein A-Modul, so ist gamma^*(M)[F^(-1)] gerade M~
  (die Tilde-Konstruktion). Denn:

  M[F^(-1)]_pre (dabei M konstante Prägarbe) bildet D(f) auf
  M[Sat_f^(-1)] ab. Man weiß, dass auf den standardoffenen Teilmengen diese
  Zuordnung die Garbenaxiome erfüllt. Also gilt:

      gamma^*(M)[F^(-1)](D(f)) =
      a(M[F^(-1)]_pre)(D(f)) =
      M[F^(-1)]_pre(D(f)) =
      M[f^(-1)].

  Dabei nutze aus, dass die Garbifizierung einer Prägarbe, welche bzgl. einer
  Basis B eine Garbe ist, eingeschränkt auf B die ursprüngliche Prägarbe ist.
  Nutze außerdem aus, dass a(colim_pre E_i) = a(colim_pre a(E_i)).

* Spec A |== exists f : gamma^*(A). F = { g : gamma^*(A) | f in sqrt((g)) }
  ist völlig falsch.

* Spec A |== forall x : gamma^*(A). x in F  v  x in Z
  ist falsch.

  Betrachte A = Z, x = 2. Wenn das stimmen würde, gäbe es eine Zerlegung der
  Eins 1 = sum_i f_i mit f_i in sqrt((2)) bzw. f_i * 2 nilpotent.
  Mindestens eines der f_i ist ungerade. Für dieses kann keine der beiden
  Alternativen gelten.

* Spec A |== neg (x in F  wedge  forall y. xy - 1 in F)
  ist für x in A vermutlich auch falsch. P ist also kein maximales Ideal, bzw.
  F kein minimaler Filter.

* Spec A |== forall y. xy - 1 in F
  ist äquivalent zu xy - 1 invertierbar für alle y,
  also zu x in Jac, dem Jacobson-Radikal.

  Verfeinert: D(f) |== forall y. xy - 1 in F
  genau dann, wenn f in sqrt(xy - 1) für alle y.

* Spec A |== x in F  vee  forall y. xy - 1 in F
  ist falsch. Gegenbeispiel: A = Z, x = 2. In einer Zerlegung der Eins muss
  mindestens eines der f_i ungerade sein. Für dieses kann weder f_i in sqrt(2)
  noch f_i in sqrt(3), sqrt(5), sqrt(7), ... gelten.

* D(f) |== F cap I bewohnt  ==>  D(f) |== f^N in I für ein N >= 0,
  falls:

  1. (U |== a in I) ==> (U bewohnt ==> Spec A |== a in I) für alle
     U <= D(f) offen, a in A.

     Hinreichend dafür: I = { x : AA | phi(x) }, wobei in phi nur konstante
     Garben vorkommen.

  2. D(f) |== I Ideal.


=== Unterschemata

* Eine interessante Aussage ist: Spec A |== b \in i_* Z,
  wobei Z das universelle Primideal auf Spec A/(a_1,...,a_n) ist.

  Daher stellt sich die Frage, ob man i_* Z intern definieren kann.

  Und, geht das?

* Spec A |== b in Z  v  a in F
      ==> b in sqrt((a)).

  Leider gilt nicht die Umkehrung!

  Sonst hätte man einfach Coquands "phi |- psi" zu "phi v neg(psi)" übersetzen
  können, oder so ähnlich.


=== Wann ist das Spektrum einpunktig?

Sei A ein lokaler Ring.

* Genau dann erfüllt der lokal geringte Raum (pt, A) die universelle
  Eigenschaft von Spec A (nämlich, dass Morphismen aus beliebig lokal geringten
  Räumen hinein durch Ringhomos in die andere Richtung auf globalen Schnitten
  gegeben sind), wenn jeder Ringhomo A --> B in einen lokalen Ring schon lokal ist.

  Dabei habe ich evtl. ein kleines bisschen klassische Logik verwendet, durch
  Betrachtung von Halmen. Neu machen mit Örtlichkeiten!

* In klassischer Logik ist das genau dann der Fall, wenn A genau ein Primideal
  besitzt:

  * Sei p irgendein Primideal. Betrachte den Homo A --> A_p.
    Sei x ein Element aus A, das nicht invertierbar ist (also im maximalen
    Ideal liegt). Dann ist nach Voraussetzung auch das Bild in A_p nicht
    invertierbar, also liegt x in p.
    Somit m \subseteq p. Die umgekehrte Richtung gilt sowieso.

  * Wenn A nur ein Primideal besitzt, ist das maximale Ideal als Schnitt aller
    Primideale das Nilradikal. Also ist jedes Element entweder invertierbar
    oder nilpotent. Damit folgt sofort die Behauptung.

* Konstruktiv hinreichend dafür sind etwa folgende Bedingungen:

  * nilpotent oder invertierbar
  * nicht nilpotent ==> invertierbar  [S^(-1) O_X erfüllt das zum Beispiel,
    wenn X reduziertes Schema]

  Es genügt aber scheinbar nicht:

  * nicht invertierbar ==> nilpotent

* Wenn man Spec A als Rahmen der Radikalideale von A (nicht nur der endlich
  erzeugten) realisiert, so ist Spec A genau dann einpunktig, wenn jedes
  Element von A nilpotent oder invertierbar ist. Denn:

  * Die Rahmenabbildung Omega --> Rad(A), phi |-> { x | x nilp. oder phi }
    ist genau dann ein Iso, wenn sie bijektiv ist.

  * Injektiv ist sie stets.

  * Surjektiv ist sie genau dann, wenn für jedes Radikalideal J gilt:
    forall x \in J: x nilp. oder 1 \in J.

  * Das ist genau dann der Fall, wenn für jedes f aus A gilt:
    f nilp. oder f invertierbar.
    (Betrachte für eine Richtung f \in sqrt(f)).

* O_X erfüllt die Bedingung "nilpotent oder invertierbar" im Allgemeinen
  nicht. Betrachte etwa X = Spec Z und f = 2. Da O_X reduziert ist, ist "2
  nilpotent" äquivalent zu "2 = 0". Es gilt aber "nicht (2 = 0)". Invertierbar
  ist 2 aber auch nicht. [Kürzer: Die Aussage ist geometrisch. Im Halm zum
  Primideal (2) ist 2 weder nilpotent noch invertierbar.]


=== Wann ist das (volle Radikalideal-)Spektrum boolsch?

* Ist a ein Radikalideal, so gilt

      neg a = { x | xu nilpotent für alle u in a }.

* Ein Radikalideal a ist genau dann dicht, wenn

      a cap b = sqrt(0) ==> b = sqrt(0)

  für alle Radikalideale b. Man kann auch nur Ideale der Form sqrt(h) nehmen.

* Spec(A) ist boolsch genau dann, wenn das Einsideal das einzige
  dichte Ideal ist. In diesem Fall gilt dim A <= 0. Die Umkehrung gilt
  vielleicht auch...

* Ein reduzierter Ring ist genau dann von Dimension <= 0, wenn er ein
  von-Neumann-regulärer Ring ist. Das bedeutet, dass für alle x gilt:
  x^2 | x.


=== Zusammenhang internes Spektrum und relatives Spektrum

Wenn man davon ausgeht, dass die universelle Eigenschaft des relativen
Spektrums sogar in der Kategorie der lokal geringten Örtlichkeiten gilt, dann
hat man:

    Hom_{LRL/(X,O_X)}(W, RelSpec A) ~~
    Hom_{LRL(Sh(X))/(pt,O_X)}(W, RelSpec A) ~~
    Hom_{O_X}(A, mu_* O_W).

Das interne Spektrum erfüllt eine ähnliche, aber nicht gleiche universelle
Eigenschaft (zumindest ist das sehr plausibel -- natürlich reden die Leute
nicht über lokal geringte Örtlichkeiten):

    Hom_{LRL(Sh(X))/(IntSpec Z)}(W, IntSpec A) ~~
    Hom_Ring(A, mu_* O_W)

    Hom_{LRL(Sh(X))/(IntSpec O_X)}(W, IntSpec A) ~~
    Hom_{O_X}(A, mu_* O_W)

Daher sieht man: Wenn IntSpec O_X ~~ (pt, O_X) sein sollte, dann würde IntSpec A
die universelle Eigenschaft von RelSpec A erfüllen.

Es stimmt im Allgemeinen aber nicht, dass IntSpec O_X ~~ (pt, O_X).

* Spec ist also ein guter Funktor Ring^op --> LRL/(Spec Z).
  Hier ist aber ein guter Funktor Alg(R)^op --> LRL/(pt, R) gesucht, wobei
  R ein lokaler Ring ist (der im Anwendungsfall O_X noch die Voraussetzung
  "nicht invertierbar ==> nilpotent" erfüllt).

* Ein Vorschlag wäre, Spec R' := Spec Reg^(-1)R zu setzen.
  Dieses Spektrum ist genau dann einpunktig, wenn jedes Element aus R
  nilpotent oder regulär ist.

  Für R = O_X bedeutet diese Bedingung insbesondere, dass für jede globale
  Funktion f gilt:

      X = Nilp(f) cup Reg(f),

  wobei Nilp(f) = { x | f nilpotent in O_{X,x} } und
  Reg(f) = { x | f regulär in allen Halmen auf einer Umgebung um x }.
  (So definiert sind beide Mengen offen, und disjunkt voneinander.)

  Für R = O_X zu X = Spec A, A Integritätsbereich, ist diese Bedingung erfüllt!
  Sogar trivialerweise, zu Überdeckungen muss man nicht übergehen.

  Für R = O_X zu X = Spec k[x,y]/(xy) aber nicht. Gegenbeispiel ist die
  Funktion x im lokalen Ring beim Ursprung. Diese ist nicht nilpotent und auch
  nicht regulär dort, insbesondere also nicht auf einer kleinen Umgebung.

* Bemerkung: Die Betrachtung von Spec (R/m), m das Ideal der nilpotenten bzw.
  nicht-invertierbaren Elemente, hilft nicht. Denn Rad(R) = Rad(R/m).
  R/m ist nur ein Körper im Sinne von "nicht invertierbar ==> null".

* Ein anderer Vorschlag wäre, als neues Spektrum nicht die Menge aller
  Radikalideale zu nehmen, sondern nur solche, sodass für jedes Element x von R,
  dessen Bild im gegebenen Radikalideal liegt, x nilpotent oder dieses Ideal
  schon das Einsideal ist.

  Diese Bedingung ist stabil unter Schnittbildung, aber nicht unter
  Summenbildung. Man kann eine Art Reflektor definieren, über

      Ja := bigcap_{a \subseteq b, b erfüllt Bedingung} b.

  Aber dann konnte ich nicht J(a cap a') = Ja cap Ja' zeigen. Das bräuchte man
  aber, wenn man damit eine Unterörtlichkeit definieren möchte.

  Ob damit die Abbildung Omega --> Rad' surjektiv wird, ist auch nicht ganz
  klar.


=== Spektrum nichtkommutativer Ringe

* Manuel Reyes. Sheaves that fail to represent matrix rings.
  http://arxiv.org/pdf/1211.4005.pdf


=== Quantorenelimination

Hat was mit dem Theorem von Chevelley über Bilder konstruierbarer Mengen zu
tun. Nächste Schritte: Das verstehen! Siehe etwa französischen Artikel von
Joyal, Theoreme de Chevalley–Tarski et remarque sur l’algebre constructive.


=== Internes Spektrum, "richtig"

Beobachtung: Die Menge der *quasikohärenten* Radikalideale von O_X entspricht
extern der Menge der offenen Teilmengen von X:

    quasikohärentes Radikalideal I
        |--> offene Menge { x \in X | 1 \in I_x }

    offene Menge U
        |--> Idealgarbe zum reduzierten abgeschlossenen Unterschema X \ U

* Da es vermutlich einen geeigneten Reflektor Radikalideale --> quasikohärente
  Radikalideale gibt, wird Rad_qcoh(O_X) zu einem internen Rahmen.
  ...aber der Reflektor ist ein *Links*adjungierter!

  Update: Es passt wunderbar, dass der Reflektor ein Linksadjungierter ist:
  a,b <= a+b <= (a+b)#.
  Sei a,b <= i. Dann a+b <= i. Dann (a+b)# <= i. Gut!
  Garbifizierung ist doch auch ein Linksadjungierter!

* Analog könnte man Rad_qcoh(A) und so Spec_int(A) definieren.
  Erfüllt das die richtigen Eigenschaften?

* Prüfe, ob für das so definierte interne Spektrum gilt:

      Spec_int(O_X[f^(-1)]) ~~ Ouv(D(f))

      Spec_int(O_X/(f)) ~~ Ouv(V(f))


=== Spektrum als universelle Lokalisierung

* Universelle Eigenschaft von Spec(A): A --> O_{Spec(A)} ist
  die universelle Lokalisierung von A. (Diese Eigenschaft spielt sich in LRL^op
  oder LRT^op ab.)

* Universelle Eigenschaft von RelSpec_{O_X}(A): A --> O_{RelSpec}
  ist die universelle Lokalisierung von A mit der Nebenbedingung, dass
  O_X --> A --> O_RelSpec lokal ist.

* Achtung: Sei B ein lokaler Ring in Spec(A) zusammen mit einem Homo
  AA --> B. Dann stimmt es im Allgemeinen *nicht*, dass es einen lokalen Homo
  O_{Spec A} --> B in Spec(A) gibt. Im Allgemein muss man noch mit einer
  geeigneter topologischen Abbildung zurückziehen.


=== Pseudokohärenz

Sei k ein Ring. Ein Radikalideal I in einer k-Algebra A heißt genau dann
pseudokohärent, wenn

    forall f:k. forall s:A. (f inv. in k ==> s in I) ==> fs in I.

* Sei I ein pseudokohärentes Radikalideal in einer k-Algebra A.
  Dann ist auch das Urbild von A in k pseudokohärent.

* Gibt es eine Klasse von Morphismen, sodass ein Ideal I <= A genau dann
  pseudokohärent ist, wenn

      Hom(?, I) --> Hom(?, I) ==> Hom(?, I)

  für alle Morphismen aus der Klasse ein Differenzkerndiagramm ist?

  Oder vielleicht mit "? tensor I" statt "Hom(?, I)"?

* Sei A eine quasikohärente O_X-Algebrengarbe in dem kleinen Zariski-Topos
  eines Schema. Dann ist sqrt(0) <= A schon pseudokohärent.

  Folgerung: Man könnte denken, dass die Äquivalenz
  
      I <= A pseudokohärent  <==>  Coh(sqrt(0)) <= I

  gilt. Die Richtung "==>" ist auch sicher erfüllt. Aber "<==" ist im
  Allgemeinen falsch, wie schon das Beispiel A = O_X (in einem Schema) zeigt.


=== Spektrum von triangulierten Tensorkategorien

Paul Balmer.
The spectrum of prime ideals in tensor triangulated categories.
http://arxiv.org/pdf/math/0409360v2.pdf


=== Nächste Schritte

* Produziere explizites Gegenbeispiel für vermutlich falsche Behauptung,
  die Bedingung "nicht invertierbar ==> nilpotent" sei hinreichend.

* In Zar(S) kann man zu einer O_S-Algebrengarbe A das interne Spektrum
  Spec A_groß bauen (als Örtlichkeit). Die Einschränkung auf Sh(S) könnte
  irgendwas interessantes sein. Was?

* Universelle Eigenschaft über Örtlichkeiten formulieren!
