=== Internes Spektrum

* W. D. Gillam. Localization of ringed spaces.
  http://www.math.brown.edu/~wgillam/localizationfinal.pdf

* Myles Tierney. In Algebra, topology and category theory (Ed. Alex Heller): On
  the spectrum of a ringed topos.

* Coquand & Co. Spectral schemes as ringed lattices.
  http://hlombardi.free.fr/publis/schemas.pdf


=== Coquands Spektrum

Sei A ein Ring.

Definiere L_A := Rad_fin(A), ist ein distributiver Verband (kein Rahmen).
Hat die Basis L_A' := { sqrt(f) | f \in A }.

Habe die auf L_A' definierte Garbe

    J |--> A[S_J^(-1)], wobei S_J = { c \in A | J \subseteq sqrt(c) }.
    (Bemerkung: Falls J = sqrt(f), ist Invertierung an S_J dasselbe wie
    Invertierung von f.)

Kann diese Garbe auf ganz L_A fortsetzen. Auf diese Weise wird L_A zu einem
geringten distributiven Verband.

Über Lokalitätsbegriffe spricht Coquand erstmal nicht.


=== Rahmen der Radikalideale

* Rad(A), die Menge aller Radikalideale, ist ein Rahmen.

* Elemente der Form sqrt((x_1,...,x_n)) sind kompakt.

* Für ein Radikalideal a ist die Menge

      Ja := { x | a \subseteq sqrt(x) }

  eine saturierte multiplikativ abgeschlossene Teilmenge. Für a = sqrt(f)
  ist Lokalisierung von Ja dasselbe wie Invertierung von f.

  Auf Rad(A) kann man kanonisch die Prägarbe

      O(a) := A[(Ja)^(-1)]

  definieren. Für endliche Überdeckungen erfüllt die vermutlich das
  Verklebeaxiom, für unendliche aber vermutlich nicht.


=== Verklebeaxiom in einem Beispiel

Sei A ein Ring. Sei 1 = sum_i z_i x_i eine Zerlegung der Eins. Seien Brüche

    s_i = a_i/b_i in A[S_i^(-1)]

gegeben, wobei S_i = { c | x_i in sqrt(c) }. Also gibt es (oBdA eine)
natürliche Zahl n und Ringelemente u_i mit

    x_i^n = u_i b_i.

Gelte s_i = s_j in den zweifach lokalisierten Ringen. Das bedeutet (oBdA), dass
es eine natürliche Zahl m und Ringelemente c_ij, v_ij mit

    c_ij b_i a_j = c_ij b_j a_i,
    (x_i x_j)^m = v_ij c_ij

gibt. Setze dann s := sum_i #_i x_i^m a_i u_i, wobei die #_i so gewählt sind,
dass 1 = sum_i #_i x_i^(m+n) gilt. Dann gilt s/1 = a_j/b_j in A[S_j^(-1)], denn

    x_j^m b_j s = ... = x_j^m a_j.


=== Duale Algebra der Radikalideale ist kein Rahmen

Beispiel in Z: Das Radikalideal

    Schnitt über alle sqrt(p), p >= 3
    addiert zu (2)

ist gleich (2) und daher echt kleiner als

    Schnitt über alle (sqrt(p) addiert mit (2)), p >= 3,

was nämlich gleich (1) ist.


=== Spektrum als Lokalisierung an universellem Filter

Def.: Ein Filter F eines Rings A ist eine Teilmenge mit
1) 1 in F
2) xy in F  <==>  x, y in F
3) nicht: 0 in F
4) x + y in F  ==>  x in F oder y in F

Prop.: A ist ein lokaler Ring <==> A^x ist ein Filter.

Prop.: Sei S saturierte mult. abg. Teilmenge. Dann:
    S Filter <==> A[S^(-1)] lokal.

Beob.: In X = Spec A habe gamma^*(A). Das ist ein Ring, jedoch nicht unbedingt
ein lokaler. Ferner habe den universellen Filter F auf gamma^*(A), auf offenen
Teilmengen definiert durch

    F(U) = { f : U --> A stetig | f(p) \not\in p f.a. p \in U }.

Die Lokalisierung von gamma^*(A) nach diesem Filter liefert gerade O_X.

Es gibt auch das universelle Primideal Z, mit

    Z(U) = { f : U --> A stetig | f(p) \in p f.a. p \in U }.

Es gilt in der internen Sprache:

    forall f : gamma^*(A). nicht (f in F) <==> f in Z.

* Ferner: Ist M ein A-Modul, so ist gamma^*(M)[F^(-1)] gerade M~
  (die Tilde-Konstruktion). Denn:

  M[F^(-1)]_pre (dabei M konstante Prägarbe) bildet D(f) auf
  M[Sat_f^(-1)] ab. Man weiß, dass auf den standardoffenen Teilmengen diese
  Zuordnung die Garbenaxiome erfüllt. Also gilt:

      gamma^*(M)[F^(-1)](D(f)) =
      a(M[F^(-1)]_pre)(D(f)) =
      M[F^(-1)]_pre(D(f)) =
      M[f^(-1)].

  Dabei nutze aus, dass die Garbifizierung einer Prägarbe, welche bzgl. einer
  Basis B eine Garbe ist, eingeschränkt auf B die ursprüngliche Prägarbe ist.
  Nutze außerdem aus, dass a(colim_pre E_i) = a(colim_pre a(E_i)).

* Spec A |== exists f : gamma^*(A). F = { g : gamma^*(A) | f in sqrt((g)) }
  ist völlig falsch.

* Spec A |== forall x : gamma^*(A). x in P  v  x in Z
  (P := Z) ist vermutlich falsch.

* Spec A |== neg (x in F  wedge  forall y. xy - 1 in F)
  ist für x in A vermutlich auch falsch. P ist also kein maximales Ideal, bzw.
  F kein minimaler Filter.

* D(f) |== F cap I bewohnt  ==>  D(f) |== f^N in I für ein N >= 0,
  falls:

  1. (U |== a in I) ==> (U bewohnt ==> Spec A |== a in I) für alle
     U <= D(f) offen, a in A.

     Hinreichend dafür: I = { x : AA | phi(x) }, wobei in phi nur konstante
     Garben vorkommen.

  2. D(f) |== I Ideal.


=== Unterschema

* Eine interessante Aussage ist: Spec A |== b \in i_* Z,
  wobei Z das universelle Primideal auf Spec A/(a_1,...,a_n) ist.

  Daher stellt sich die Frage, ob man i_* Z intern definieren kann.

  Und, geht das?

* Spec A |== b in Z  v  a in F
      ==> b in sqrt((a)).

  Leider gilt nicht die Umkehrung!

  Sonst hätte man einfach Coquands "phi |- psi" zu "phi v neg(psi)" übersetzen
  können, oder so ähnlich.


=== Wann ist das Spektrum einpunktig?

Sei A ein lokaler Ring.

* Genau dann erfüllt der lokal geringte Raum (pt, A) die universelle
  Eigenschaft von Spec A (nämlich, dass Morphismen aus beliebig lokal geringten
  Räumen hinein durch Ringhomos in die andere Richtung auf globalen Schnitten
  gegeben sind), wenn jeder Ringhomo A --> B in einen lokalen Ring schon lokal ist.

  Dabei habe ich evtl. ein kleines bisschen klassische Logik verwendet, durch
  Betrachtung von Halmen. Neu machen mit Örtlichkeiten!

* In klassischer Logik ist das genau dann der Fall, wenn A genau ein Primideal
  besitzt:

  * Sei p irgendein Primideal. Betrachte den Homo A --> A_p.
    Sei x ein Element aus A, das nicht invertierbar ist (also im maximalen
    Ideal liegt). Dann ist nach Voraussetzung auch das Bild in A_p nicht
    invertierbar, also liegt x in p.
    Somit m \subseteq p. Die umgekehrte Richtung gilt sowieso.

  * Wenn A nur ein Primideal besitzt, ist das maximale Ideal als Schnitt aller
    Primideale das Nilradikal. Also ist jedes Element entweder invertierbar
    oder nilpotent. Damit folgt sofort die Behauptung.

* Konstruktiv hinreichend dafür sind etwa folgende Bedingungen:

  * nilpotent oder invertierbar
  * nicht nilpotent ==> invertierbar  [S^(-1) O_X erfüllt das zum Beispiel,
    wenn X reduziertes Schema]

  Es genügt aber scheinbar nicht:

  * nicht invertierbar ==> nilpotent

* Wenn man Spec A als Rahmen der Radikalideale von A (nicht nur der endlich
  erzeugten) realisiert, so ist Spec A genau dann einpunktig, wenn jedes
  Element von A nilpotent oder invertierbar ist. Denn:

  * Die Rahmenabbildung Omega --> Rad(A), phi |-> { x | x nilp. oder phi }
    ist genau dann ein Iso, wenn sie bijektiv ist.

  * Injektiv ist sie stets.

  * Surjektiv ist sie genau dann, wenn für jedes Radikalideal J gilt:
    forall x \in J: x nilp. oder 1 \in J.

  * Das ist genau dann der Fall, wenn für jedes f aus A gilt:
    f nilp. oder f invertierbar.
    (Betrachte für eine Richtung f \in sqrt(f)).

* O_X erfüllt die Bedingung "nilpotent oder invertierbar" im Allgemeinen
  nicht. Betrachte etwa X = Spec Z und f = 2. Da O_X reduziert ist, ist "2
  nilpotent" äquivalent zu "2 = 0". Es gilt aber "nicht (2 = 0)". Invertierbar
  ist 2 aber auch nicht. [Kürzer: Die Aussage ist geometrisch. Im Halm zum
  Primideal (2) ist 2 weder nilpotent noch invertierbar.]


=== Wann ist das (volle Radikalideal-)Spektrum boolsch?

* Ist a ein Radikalideal, so gilt

      neg a = { x | xu nilpotent für alle u in a }.

* Ein Radikalideal a ist genau dann dicht, wenn

      a cap b = sqrt(0) ==> b = sqrt(0)

  für alle Radikalideale b. Man kann auch nur Ideale der Form sqrt(h) nehmen.

* Spec(A) ist boolsch genau dann, wenn das Einsideal das einzige
  dichte Ideal ist. In diesem Fall gilt dim A <= 0. Die Umkehrung gilt
  vielleicht auch...

* Ein reduzierter Ring ist genau dann von Dimension <= 0, wenn er ein
  von-Neumann-regulärer Ring ist. Das bedeutet, dass für alle x gilt:
  x^2 | x.


=== Zusammenhang internes Spektrum und relatives Spektrum

Wenn man davon ausgeht, dass die universelle Eigenschaft des relativen
Spektrums sogar in der Kategorie der lokal geringten Örtlichkeiten gilt, dann
hat man:

    Hom_{LRL/(X,O_X)}(W, RelSpec A) ~~
    Hom_{LRL(Sh(X))/(pt,O_X)}(W, RelSpec A) ~~
    Hom_{O_X}(A, mu_* O_W).

Das interne Spektrum erfüllt eine ähnliche, aber nicht gleiche universelle
Eigenschaft (zumindest ist das sehr plausibel -- natürlich reden die Leute
nicht über lokal geringte Örtlichkeiten):

    Hom_{LRL(Sh(X))/(IntSpec Z)}(W, IntSpec A) ~~
    Hom_Ring(A, mu_* O_W)

    Hom_{LRL(Sh(X))/(IntSpec O_X)}(W, IntSpec A) ~~
    Hom_{O_X}(A, mu_* O_W)

Daher sieht man: Wenn IntSpec O_X ~~ (pt, O_X) sein sollte, dann würde IntSpec A
die universelle Eigenschaft von RelSpec A erfüllen.

Es stimmt im Allgemeinen aber nicht, dass IntSpec O_X ~~ (pt, O_X).

* Spec ist also ein guter Funktor Ring^op --> LRL/(Spec Z).
  Hier ist aber ein guter Funktor Alg(R)^op --> LRL/(pt, R) gesucht, wobei
  R ein lokaler Ring ist (der im Anwendungsfall O_X noch die Voraussetzung
  "nicht invertierbar ==> nilpotent" erfüllt).

* Ein Vorschlag wäre, Spec R' := Spec Reg^(-1)R zu setzen.
  Dieses Spektrum ist genau dann einpunktig, wenn jedes Element aus R
  nilpotent oder regulär ist.

  Für R = O_X bedeutet diese Bedingung insbesondere, dass für jede globale
  Funktion f gilt:

      X = Nilp(f) cup Reg(f),

  wobei Nilp(f) = { x | f nilpotent in O_{X,x} } und
  Reg(f) = { x | f regulär in allen Halmen auf einer Umgebung um x }.
  (So definiert sind beide Mengen offen, und disjunkt voneinander.)

  Für R = O_X zu X = Spec A, A Integritätsbereich, ist diese Bedingung erfüllt!
  Sogar trivialerweise, zu Überdeckungen muss man nicht übergehen.

  Für R = O_X zu X = Spec k[x,y]/(xy) aber nicht. Gegenbeispiel ist die
  Funktion x im lokalen Ring beim Ursprung. Diese ist nicht nilpotent und auch
  nicht regulär dort, insbesondere also nicht auf einer kleinen Umgebung.

* Bemerkung: Die Betrachtung von Spec (R/m), m das Ideal der nilpotenten bzw.
  nicht-invertierbaren Elemente, hilft nicht. Denn Rad(R) = Rad(R/m).
  R/m ist nur ein Körper im Sinne von "nicht invertierbar ==> null".

* Ein anderer Vorschlag wäre, als neues Spektrum nicht die Menge aller
  Radikalideale zu nehmen, sondern nur solche, sodass für jedes Element x von R,
  dessen Bild im gegebenen Radikalideal liegt, x nilpotent oder dieses Ideal
  schon das Einsideal ist.

  Diese Bedingung ist stabil unter Schnittbildung, aber nicht unter
  Summenbildung. Man kann eine Art Reflektor definieren, über

      Ja := bigcap_{a \subseteq b, b erfüllt Bedingung} b.

  Aber dann konnte ich nicht J(a cap a') = Ja cap Ja' zeigen. Das bräuchte man
  aber, wenn man damit eine Unterörtlichkeit definieren möchte.

  Ob damit die Abbildung Omega --> Rad' surjektiv wird, ist auch nicht ganz
  klar.


=== Spektrum nichtkommutativer Ringe

* Manuel Reyes. Sheaves that fail to represent matrix rings.
  http://arxiv.org/pdf/1211.4005.pdf


=== Quantorenelimination

Hat was mit dem Theorem von Chevelley über Bilder konstruierbarer Mengen zu
tun. Nächste Schritte: Das verstehen! Siehe etwa französischen Artikel von
Joyal, Theoreme de Chevalley–Tarski et remarque sur l’algebre constructive.


=== Internes Spektrum, "richtig"

Beobachtung: Die Menge der *quasikohärenten* Radikalideale von O_X entspricht
extern der Menge der offenen Teilmengen von X:

    quasikohärentes Radikalideal I
        |--> offene Menge { x \in X | 1 \in I_x }

    offene Menge U
        |--> Idealgarbe zum reduzierten abgeschlossenen Unterschema X \ U

* Da es vermutlich einen geeigneten Reflektor Radikalideale --> quasikohärente
  Radikalideale gibt, wird Rad_qcoh(O_X) zu einem internen Rahmen.
  ...aber der Reflektor ist ein *Links*adjungierter!

* Analog könnte man Rad_qcoh(A) und so Spec_int(A) definieren.
  Erfüllt das die richtigen Eigenschaften?

* Prüfe, ob für das so definierte interne Spektrum gilt:

      Spec_int(O_X[f^(-1)]) ~~ Ouv(D(f))

      Spec_int(O_X/(f)) ~~ Ouv(V(f))


=== Spektrum von triangulierten Tensorkategorien

Paul Balmer.
The spectrum of prime ideals in tensor triangulated categories.
http://arxiv.org/pdf/math/0409360v2.pdf


=== Nächste Schritte

* Produziere explizites Gegenbeispiel für vermutlich falsche Behauptung,
  die Bedingung "nicht invertierbar ==> nilpotent" sei hinreichend.

* In Zar(S) kann man zu einer O_S-Algebrengarbe A das interne Spektrum
  Spec A_groß bauen (als Örtlichkeit). Die Einschränkung auf Sh(S) könnte
  irgendwas interessantes sein. Was?

* Universelle Eigenschaft über Örtlichkeiten formulieren!
